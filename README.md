# Chinese Daily Planner

This is a simple web application built with Python and the FastHTML framework to act as a daily planner and notes app, initially focused on language learning tasks.

## Features

*   Monthly calendar view with navigation.
*   Clickable dates to view/edit daily notes and tasks.
*   Markdown support for notes using EasyMDE (with live preview and fullscreen mode).
*   Markdown support for daily tasks, editable with a separate EasyMDE instance.
*   Smooth FLIP-like animations for opening/closing task editor.
*   Interactive checkboxes for tasks integrated within daily notes (task display syncs with edits in MDE).
*   Storage of notes and task states in Markdown files.
*   Editable daily task templates for each day of the week, with smart pre-fill from current day's tasks if applicable.
*   Themeable interface (details in `static/css/theme.css`).

## Prerequisites

*   Python 3.8+
*   `pip` (Python package installer)
*   For Windows users: PowerShell (for the `run_dev.ps1` script)

## Setup and Running

There are two main ways to set up and run the application:

**1. Using the Development Script (Recommended for Windows):**

   a. Clone the repository:
      ```bash
      git clone <your-repository-url>
      cd chinese-daily
      ```
   b. Run the development script from the project root:
      ```powershell
      .\run_dev.ps1
      ```
      This script will automatically:
      *   Create a Python virtual environment (`.venv`) if it doesn't exist.
      *   Activate the virtual environment.
      *   Install/update dependencies from `requirements.txt`.
      *   Start the development server.

      *Note:* If you encounter PowerShell execution policy issues, you might need to run this command once in PowerShell (with administrator rights if necessary):
      `Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope Process`

**2. Manual Setup (All Platforms):**

   a. **Clone the repository:**
      ```bash
      git clone <your-repository-url>
      cd chinese-daily
      ```

   b. **Create and activate a virtual environment:**
      *   Windows (Command Prompt/PowerShell):
          ```powershell
          python -m venv .venv
          .venv\Scripts\activate
          ```
      *   macOS/Linux (Bash/Zsh):
          ```bash
          python3 -m venv .venv
          source .venv/bin/activate
          ```

   c. **Install dependencies:**
      ```bash
      pip install -r requirements.txt
      ```

   d. **Run the Application:**
      Ensure your virtual environment is activated. Then, run the Uvicorn server from the project root directory:
      ```bash
      python -m uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload 
      ```
**Accessing the Application:**

Once the server is running, open your web browser and navigate to `http://127.0.0.1:8000` or `http://localhost:8000`.

## Project Structure

*   `app/`: Core application logic.
    *   `main.py`: Main application entry point, FastHTML app initialization, static file mounting, route module imports.
    *   `config.py`: Configuration constants (paths, UI settings, etc.).
    *   `services/`: Business logic (file storage, markdown processing).
        *   `storage.py`: Handles reading/writing daily files (tasks and notes) and task templates.
        *   `markdown.py`: Configures the Mistune markdown parser.
    *   `ui/`: Reusable UI component generation functions (e.g., sidebar, navigation buttons).
        *   `components.py`: Contains functions like `_generate_sidebar`, `day_nav_button`.
    *   `web/`: Web route handlers (controllers) for different application sections.
        *   `routes_calendar.py`: Handles calendar display.
        *   `routes_notes.py`: Handles daily notes display, editing (MDE), specific day task display and editing (MDE).
        *   `routes_tasks.py`: Handles editing of task templates for days of the week.
*   `static/`: Static assets.
    *   `css/`: Stylesheets, including `main.css` (imports other CSS files), `theme.css`, etc.
    *   `js/`: JavaScript files.
        *   `mde_injection.js`: Initializes EasyMDE instances and handles FLIP animations for task blocks.
*   `data/`: Stores daily notes and task states as Markdown files (e.g., `YYYY-MM-DD_notes.md`). This directory is in `.gitignore` but its contents are generated by the app.
*   `tasks/`: Stores default task templates for each day of the week (e.g., `monday.md`).
*   `run_dev.ps1`: PowerShell script to automate setup and launch on Windows.
*   `requirements.txt`: Python package dependencies.
*   `README.md`: This file.
*   `index_components.md`: Index for locating CSS of UI components.
*   `index_routes.md`: Index for API routes and their handlers. (To be created)
*   `index_ui_components.md`: Index for Python UI component generator functions. (To be created)

## Key Technologies

*   **FastHTML:** Python web framework.
*   **Uvicorn:** ASGI server.
*   **EasyMDE:** JavaScript Markdown editor.
*   **HTMX:** For dynamic page updates without full reloads.
*   **Beautiful Soup:** For HTML parsing (primarily for task checkbox manipulation).
*   **Mistune:** Markdown parser.

